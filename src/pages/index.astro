---
import Layout from "../layouts/Layout.astro";
import { getGithubUpdatedAt } from "../lib/utils";
import TerminalPrompt from "../components/TerminalPrompt.astro";
import { personalInfo, experience, education } from "../data/portfolio";

const githubUpdatedAt = await getGithubUpdatedAt();
---

<Layout title="portfolio@milind.dev" includePadding={true}>
	<div
		id="terminal-container"
		class="font-mono text-xs sm:text-sm md:text-base leading-tight z-10 min-h-[100vh]"
	>
		<div class="mb-4">
			<TerminalPrompt user="portfolio" host="milind.dev">
				<span id="typewriter" class="text-ctp-text"></span><span
					id="cursor"
					class="text-ctp-text animate-pulse">â–ˆ</span
				>
			</TerminalPrompt>
		</div>

		<div id="fetch-output" class="hidden">
			<div
				class="flex flex-col lg:flex-row gap-10 items-center lg:items-start w-fit"
			>
				<div class="select-none text-ctp-blue font-bold">
					<pre>                   -`
                  .o+`
                 `ooo/
                `+oooo:
               `+oooooo:
               -+oooooo+:
             `/:-:++oooo+:
            `/++++/+++++++:
           `/++++++++++++++:
          `/+++ooooooooooooo/`
         ./ooosssso++osssssso+`
        .oossssso-````/ossssss+`
       -osssssso.      :ssssssso.
      :osssssss/        osssso+++.
     /ossssssss/        +ssssooo/-
   `/ossssso+/:-        -:/+osssso+-
  `+sso+:-`                 `.-/+oso:
 `++:.                           `-/+/
 .`                                 `/</pre>
				</div>

				<div class="flex flex-col gap-[2px]">
					<div class="mb-2">
						<span class="text-ctp-red">portfolio</span><span
							class="text-ctp-overlay2">@</span
						><span class="text-ctp-teal">milind.dev</span>
					</div>
					<div class="text-ctp-overlay1">
						--------------------------
					</div>
					<div>
						<span class="text-ctp-blue"
							><i class="nf nf-md-map_marker"></i> Role</span
						>
						<span> : DevOps & Backend Engineer</span>
					</div>
					<div>
						<span class="text-ctp-blue"
							><i class="nf nf-fa-building"></i> Work</span
						>
						<span> : {experience[0].company}</span>
					</div>
					<div>
						<span class="text-ctp-blue"
							><i class="nf nf-md-school"></i> Education</span
						>
						<span> : {education[0].institution}</span>
					</div>
					<div>
						<span class="text-ctp-blue"
							><i class="nf nf-md-briefcase"></i> Experience</span
						>
						<span> : 5 years, 4 clients, 8 projects</span>
					</div>
					<div>
						<span class="text-ctp-blue"
							><i class="nf nf-md-file_document"></i> Articles</span
						>
						<span> : 2</span>
					</div>
					<div>
						<span class="text-ctp-blue"
							><i class="nf nf-md-clock"></i> Uptime</span
						>
						<span> : </span><span id="uptime">Loading...</span>
					</div>
					<div class="text-ctp-overlay1">
						--------------------------
					</div>
					<div class="mt-2 flex gap-3 select-none">
						<span class="w-3 h-3 rounded-full bg-ctp-black"></span>
						<span class="w-3 h-3 rounded-full bg-ctp-red"></span>
						<span class="w-3 h-3 rounded-full bg-ctp-green"></span>
						<span class="w-3 h-3 rounded-full bg-ctp-yellow"></span>
						<span class="w-3 h-3 rounded-full bg-ctp-blue"></span>
						<span class="w-3 h-3 rounded-full bg-ctp-mauve"></span>
						<span class="w-3 h-3 rounded-full bg-ctp-teal"></span>
						<span class="w-3 h-3 rounded-full bg-ctp-text"></span>
					</div>
				</div>
			</div>

			<div class="mt-4"></div>
		</div>
	</div>

	<script>
		// Typewriter animation
		const text = "fastfetch";
		const typewriter = document.getElementById("typewriter");
		const fetchOutput = document.getElementById("fetch-output");
		const cursor = document.getElementById("cursor");
		let i = 0;

		function type() {
			if (i < text.length) {
				typewriter.textContent += text.charAt(i);
				i++;
				setTimeout(type, 50 + Math.random() * 50);
			} else {
				setTimeout(() => {
					if (fetchOutput) fetchOutput.classList.remove("hidden");
					if (cursor) cursor.style.display = "none"; // Hide cursor after typing
				}, 500);
			}
		}

		// Start typing after a short delay
		setTimeout(type, 200);

		// Uptime Logic
		function updateUptime() {
			const birthDate = new Date("2004-04-15T05:30:00");
			const now = new Date();

			let years = now.getFullYear() - birthDate.getFullYear();
			let months = now.getMonth() - birthDate.getMonth();
			let days = now.getDate() - birthDate.getDate();

			if (days < 0) {
				months--;
				// Get days in previous month
				const prevMonth = new Date(
					now.getFullYear(),
					now.getMonth(),
					0,
				);
				days += prevMonth.getDate();
			}

			if (months < 0) {
				years--;
				months += 12;
			}

			// Calculate time difference for the "moving" feel
			// We can just show the time component as well
			const hours = now.getHours();
			const minutes = now.getMinutes();
			const seconds = now.getSeconds();

			const uptimeElement = document.getElementById("uptime");
			if (uptimeElement) {
				uptimeElement.textContent = `${years} years, ${months} months, ${days} days`;
			}
		}

		setInterval(updateUptime, 1000);
		updateUptime();
	</script>
	<div class="flex flex-col min-h-[100vh]">
		<TerminalPrompt user="portfolio" host="milind.dev" command="ls -la" />
		<div>
			<span class="text-ctp-overlay1">total 5</span>
		</div>
		<div class="grid grid-cols-[auto_auto_auto_auto_1fr] gap-x-4 w-fit">
			<div class="underline">Permissions</div>
			<div class="underline">Size</div>
			<div class="underline">Owner</div>
			<div class="underline">Date Modified</div>
			<div class="underline">Name</div>
			<div>
				<span class="text-ctp-teal">d</span><span
					class="text-ctp-yellow">r</span
				><span class="text-ctp-red">w</span><span class="text-ctp-green"
					>x</span
				><span class="text-ctp-peach">r</span><span
					class="text-ctp-overlay1">-</span
				><span class="text-ctp-green">x</span><span
					class="text-ctp-yellow">r</span
				><span class="text-ctp-overlay1">-</span><span
					class="text-ctp-green">x</span
				><span class="text-ctp-text">@</span>
			</div>
			<div class="text-ctp-overlay1">-</div>
			<div class="text-ctp-yellow">milindmadhukar</div>
			<div class="text-ctp-blue">
				{
					new Date().toLocaleDateString("en-US", {
						month: "short",
						day: "numeric",
						hour: "numeric",
						minute: "numeric",
						hour12: false,
					})
				}
			</div>
			<a href="/" class="text-ctp-green">.</a>
			<div>
				<span class="text-ctp-teal">d</span><span
					class="text-ctp-yellow">r</span
				><span class="text-ctp-red">w</span><span class="text-ctp-green"
					>x</span
				><span class="text-ctp-peach">r</span><span
					class="text-ctp-overlay1">-</span
				><span class="text-ctp-green">x</span><span
					class="text-ctp-yellow">r</span
				><span class="text-ctp-overlay1">-</span><span
					class="text-ctp-green">x</span
				><span class="text-ctp-text">@</span>
			</div>
			<div class="text-ctp-overlay1">-</div>
			<div class="text-ctp-yellow">milindmadhukar</div>
			<div class="text-ctp-blue">
				{
					new Date(1987, 6, 27).toLocaleDateString("en-US", {
						month: "short",
						day: "numeric",
						hour: "numeric",
						minute: "numeric",
						hour12: false,
					})
				}
			</div>
			<a
				href="https://www.youtube.com/watch?v=dQw4w9WgXcQ"
				class="text-ctp-green">..</a
			>
			<div>
				<span class="text-ctp-teal">d</span><span
					class="text-ctp-yellow">r</span
				><span class="text-ctp-red">w</span><span class="text-ctp-green"
					>x</span
				><span class="text-ctp-peach">r</span><span
					class="text-ctp-overlay1">-</span
				><span class="text-ctp-green">x</span><span
					class="text-ctp-yellow">r</span
				><span class="text-ctp-overlay1">-</span><span
					class="text-ctp-green">x</span
				><span class="text-ctp-text">@</span>
			</div>
			<div class="text-ctp-overlay1">-</div>
			<div class="text-ctp-yellow">milindmadhukar</div>
			<div class="text-ctp-blue">
				{
					githubUpdatedAt.toLocaleDateString("en-US", {
						month: "short",
						day: "numeric",
						hour: "numeric",
						minute: "numeric",
						hour12: false,
					})
				}
			</div>
			<a href="https://github.com/milindmadhukar" class="text-ctp-green"
				>.github</a
			>
			<div>
				<span class="text-ctp-teal">d</span><span
					class="text-ctp-yellow">r</span
				><span class="text-ctp-red">w</span><span class="text-ctp-green"
					>x</span
				><span class="text-ctp-peach">r</span><span
					class="text-ctp-overlay1">-</span
				><span class="text-ctp-green">x</span><span
					class="text-ctp-yellow">r</span
				><span class="text-ctp-overlay1">-</span><span
					class="text-ctp-green">x</span
				><span class="text-ctp-text">@</span>
			</div>
			<div class="text-ctp-overlay1">-</div>
			<div class="text-ctp-yellow">milindmadhukar</div>
			<div class="text-ctp-blue">
				{
					new Date().toLocaleDateString("en-US", {
						month: "short",
						day: "numeric",
						hour: "numeric",
						minute: "numeric",
						hour12: false,
					})
				}
			</div>
			<a href={`mailto:${personalInfo.email}`} class="text-ctp-green"
				>.email</a
			>
			<div>
				<span class="text-ctp-teal">d</span><span
					class="text-ctp-yellow">r</span
				><span class="text-ctp-red">w</span><span class="text-ctp-green"
					>x</span
				><span class="text-ctp-peach">r</span><span
					class="text-ctp-overlay1">-</span
				><span class="text-ctp-green">x</span><span
					class="text-ctp-yellow">r</span
				><span class="text-ctp-overlay1">-</span><span
					class="text-ctp-green">x</span
				><span class="text-ctp-text">@</span>
			</div>
			<div class="text-ctp-overlay1">-</div>
			<div class="text-ctp-yellow">milindmadhukar</div>
			<div class="text-ctp-blue">
				{
					new Date().toLocaleDateString("en-US", {
						month: "short",
						day: "numeric",
						hour: "numeric",
						minute: "numeric",
						hour12: false,
					})
				}
			</div>
			<a
				href={personalInfo.social.find((s) => s.name === "LinkedIn")
					?.url}
				class="text-ctp-green">.linkedin</a
			>
			<div>
				<span class="text-ctp-teal">d</span><span
					class="text-ctp-yellow">r</span
				><span class="text-ctp-red">w</span><span class="text-ctp-green"
					>x</span
				><span class="text-ctp-peach">r</span><span
					class="text-ctp-overlay1">-</span
				><span class="text-ctp-green">x</span><span
					class="text-ctp-yellow">r</span
				><span class="text-ctp-overlay1">-</span><span
					class="text-ctp-green">x</span
				><span class="text-ctp-text">@</span>
			</div>
			<div class="text-ctp-overlay1">-</div>
			<div class="text-ctp-yellow">milindmadhukar</div>
			<div class="text-ctp-blue">
				{
					new Date().toLocaleDateString("en-US", {
						month: "short",
						day: "numeric",
						hour: "numeric",
						minute: "numeric",
						hour12: false,
					})
				}
			</div>
			<a
				href={personalInfo.social.find((s) => s.name === "Twitter")
					?.url}
				class="text-ctp-green">.twitter</a
			>
			<div>
				<span class="text-ctp-teal">d</span><span
					class="text-ctp-yellow">r</span
				><span class="text-ctp-red">w</span><span class="text-ctp-green"
					>x</span
				><span class="text-ctp-peach">r</span><span
					class="text-ctp-overlay1">-</span
				><span class="text-ctp-green">x</span><span
					class="text-ctp-yellow">r</span
				><span class="text-ctp-overlay1">-</span><span
					class="text-ctp-green">x</span
				><span class="text-ctp-text">@</span>
			</div>
			<div class="text-ctp-overlay1">-</div>
			<div class="text-ctp-yellow">milindmadhukar</div>
			<div class="text-ctp-blue">
				{
					new Date().toLocaleDateString("en-US", {
						month: "short",
						day: "numeric",
						hour: "numeric",
						minute: "numeric",
						hour12: false,
					})
				}
			</div>
			<a
				href={personalInfo.social.find((s) => s.name === "Instagram")
					?.url}
				class="text-ctp-green">.instagram</a
			>
			<div>
				<span class="text-ctp-teal">d</span><span
					class="text-ctp-yellow">r</span
				><span class="text-ctp-red">w</span><span class="text-ctp-green"
					>x</span
				><span class="text-ctp-peach">r</span><span
					class="text-ctp-overlay1">-</span
				><span class="text-ctp-green">x</span><span
					class="text-ctp-yellow">r</span
				><span class="text-ctp-overlay1">-</span><span
					class="text-ctp-green">x</span
				><span class="text-ctp-text">@</span>
			</div>
			<div class="text-ctp-overlay1">-</div>
			<div class="text-ctp-yellow">milindmadhukar</div>
			<div class="text-ctp-blue">
				{
					new Date().toLocaleDateString("en-US", {
						month: "short",
						day: "numeric",
						hour: "numeric",
						minute: "numeric",
						hour12: false,
					})
				}
			</div>
			<a href="/projects" class="text-ctp-green">projects</a>
			<div>
				<span class="text-ctp-teal">d</span><span
					class="text-ctp-yellow">r</span
				><span class="text-ctp-red">w</span><span class="text-ctp-green"
					>x</span
				><span class="text-ctp-peach">r</span><span
					class="text-ctp-overlay1">-</span
				><span class="text-ctp-green">x</span><span
					class="text-ctp-yellow">r</span
				><span class="text-ctp-overlay1">-</span><span
					class="text-ctp-green">x</span
				><span class="text-ctp-text">@</span>
			</div>
			<div class="text-ctp-overlay1">-</div>
			<div class="text-ctp-yellow">milindmadhukar</div>
			<div class="text-ctp-blue">
				{
					new Date().toLocaleDateString("en-US", {
						month: "short",
						day: "numeric",
						hour: "numeric",
						minute: "numeric",
						hour12: false,
					})
				}
			</div>
			<a href="/work" class="text-ctp-green">work</a>
			<div>
				<span class="text-ctp-teal">d</span><span
					class="text-ctp-yellow">r</span
				><span class="text-ctp-red">w</span><span class="text-ctp-green"
					>x</span
				><span class="text-ctp-peach">r</span><span
					class="text-ctp-overlay1">-</span
				><span class="text-ctp-green">x</span><span
					class="text-ctp-yellow">r</span
				><span class="text-ctp-overlay1">-</span><span
					class="text-ctp-green">x</span
				><span class="text-ctp-text">@</span>
			</div>
			<div class="text-ctp-overlay1">-</div>
			<div class="text-ctp-yellow">milindmadhukar</div>
			<div class="text-ctp-blue">
				{
					new Date().toLocaleDateString("en-US", {
						month: "short",
						day: "numeric",
						hour: "numeric",
						minute: "numeric",
						hour12: false,
					})
				}
			</div>
			<a href="/blog" class="text-ctp-green">blog</a>
		</div>
	</div>
</Layout>
