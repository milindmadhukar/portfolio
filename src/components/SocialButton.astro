---
interface Props {
  name: string;
  url: string;
  icon: string;
  color: string;
  description?: string;
  size?: 'sm' | 'md' | 'lg';
}

const { name, url, icon, color, description, size = 'lg' } = Astro.props;

// Map icon names to Simple Icons slugs (for CDN)
// If icon is available on Simple Icons CDN, use it; otherwise use local SVG
const simpleIconsMap: Record<string, string> = {
  'github': 'github',
  'mail': 'gmail',
  'twitter': 'x',
  'instagram': 'instagram',
  'spotify': 'spotify'
};

// Check if icon is available on Simple Icons CDN
const useSimpleIcons = simpleIconsMap[icon] !== undefined;
const iconSlug = simpleIconsMap[icon] || icon;
const iconSrc = useSimpleIcons 
  ? `https://cdn.simpleicons.org/${iconSlug}`
  : `/icons/${icon}.svg`;

// Map color names to CSS variable names
const colorVars: Record<string, string> = {
  'cyber-blue': '--color-cyber-blue',
  'cyber-purple': '--color-cyber-purple',
  'cyber-pink': '--color-cyber-pink',
  'cyber-cyan': '--color-cyber-cyan',
  'cyber-white': '--color-cyber-white',
  'neon-green': '--color-neon-green',
  'neon-orange': '--color-neon-orange',
};

const colorVar = colorVars[color] || '--color-cyber-blue';

// Size configurations
const sizeClasses = {
  sm: 'px-3 py-1.5 sm:px-4 sm:py-2',
  md: 'px-3 py-2 sm:px-5 sm:py-2.5',
  lg: 'px-4 py-2.5 sm:px-6 sm:py-3'
};

const iconSizes = {
  sm: 'w-3.5 h-3.5 sm:w-4 sm:h-4',
  md: 'w-4 h-4',
  lg: 'w-4 h-4 sm:w-5 sm:h-5'
};

const textSizes = {
  sm: 'text-xs sm:text-sm',
  md: 'text-xs sm:text-sm',
  lg: 'text-sm'
};
---

<a
  href={url}
  target="_blank"
  rel="noopener noreferrer"
  class={`group ${sizeClasses[size]} rounded-lg border border-[var(--border-color)] bg-[var(--bg-elevated)] transition-all duration-300 hover-glow social-button`}
  style={`--button-color: var(${colorVar})`}
  aria-label={name}
>
  <div class="flex items-center gap-2 sm:gap-3">
    <div 
      class={`${iconSizes[size]} transition-all flex-shrink-0 social-icon`}
      style={`-webkit-mask-image: url('${iconSrc}'); mask-image: url('${iconSrc}');`}
      aria-hidden="true"
    ></div>
    <span class={`${textSizes[size]} font-medium text-[var(--text-secondary)] transition-colors social-text whitespace-nowrap`}>
      {name}
    </span>
    {description && (
      <span class="text-xs text-[var(--text-tertiary)]">({description})</span>
    )}
  </div>
</a>

<style>
  .social-button:hover {
    border-color: var(--button-color);
  }
  
  .social-icon {
    background-color: var(--text-secondary);
    -webkit-mask-size: contain;
    mask-size: contain;
    -webkit-mask-repeat: no-repeat;
    mask-repeat: no-repeat;
    -webkit-mask-position: center;
    mask-position: center;
    transition: background-color 0.3s ease-in-out;
  }
  
  .social-button:hover .social-icon {
    background-color: var(--button-color);
  }
  
  .social-button:hover .social-text {
    color: var(--button-color);
  }
</style>
